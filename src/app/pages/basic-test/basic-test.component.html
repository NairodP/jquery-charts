<div class="basic-test-container">
  <h1>Page de Test des Graphiques</h1>

  <div class="description">
    <p>
      Cette page permet de tester l'intégration de la bibliothèque jQuery-Charts
      avec jquery-core + jquery-apexcharts ou jquery-highcharts et de reproduire
      certains effets de bord relevés. Vous pouvez utiliser le panneau de
      contrôle en bas pour sélectionner le graphique à afficher.
    </p>
  </div>

  <div class="charts-container">
    <div class="chart-wrapper">
      <div class="chart-box">
        <chart
          #chart
          [type]="chartType"
          [config]="chartConfig"
          [data]="chartData"
          [debug]="true"
        ></chart>
        <!-- [possibleType]="['pie', 'donut', 'line', 'polar', 'radar','funnel', 'treemap', 'pyramid', 'radarArea', 'radialBar', 'heatmap']" -->
      </div>

      <!-- <div class="chart-box">
        <chart
          #chart
          [type]="chartType"
          [config]="chartConfig"
          [data]="chartData"
          [debug]="true"
        ></chart>
        [possibleType]="['pie', 'donut', 'line', 'polar', 'radar','funnel', 'treemap', 'pyramid', 'radarArea', 'radialBar', 'heatmap']"
      </div> -->
    </div>
  </div>

  <!-- debug -->
  <div class="debug-panel">
    <h3>Informations de Debug</h3>
    <div class="debug-info">
      <p><strong>Type de graphique :</strong> {{ chartType }}</p>
      <p><strong>Mode :</strong> {{ getCurrentMode() }}</p>
      <p><strong>Nombre de données :</strong> {{ chartData?.length || 0 }}</p>
      <p><strong>Délai de chargement :</strong> {{ dataDelay }}ms</p>
      <!-- <p><strong>Graph combiné :</strong> {{ isComboChart ? 'Oui' : 'Non' }}</p> -->
    </div>
  </div>

  <!-- Contrôles simples (sticky) -->
  <div class="control-panel-simple" [class.hidden]="!isPanelVisible">
    <div class="control-group">
      <label for="chart-type-select">Type de graphique :</label>
      <select
        id="chart-type-select"
        [(ngModel)]="chartType"
        (change)="changeChartType()"
      >
        <optgroup label="Graphiques simples">
          <option value="pie">Pie</option>
          <option value="donut">Donut</option>
          <option value="funnel">Funnel</option>
          <option value="pyramid">Pyramid</option>
          <option value="polar">Polar</option>
          <option value="radar">Radar</option>
          <option value="radar">RadarArea</option>
          <option value="radialBar">Radial Bar</option>
        </optgroup>
        <optgroup label="Graphiques complexes">
          <option value="bar">Bar</option>
          <option value="column">Column</option>
          <option value="columnpyramid">Column Pyramid</option>
          <option value="line">Line</option>
          <option value="area">Area</option>
          <option value="spline">Spline</option>
          <option value="areaspline">Area Spline</option>
          <option value="columnrange">Column Range</option>
          <option value="arearange">Area Range</option>
          <option value="areasplinerange">Area Spline Range</option>
          <option value="scatter">Scatter</option>
          <option value="bubble">Bubble</option>
          <option value="heatmap">Heatmap</option>
          <option value="treemap">Treemap</option>
          <option value="boxplot">BoxPlot</option>
        </optgroup>
      </select>
    </div>

    <div class="control-group">
      <button
        class="btn reload-btn"
        (click)="reloadData()"
        title="Recharger les données"
      >
        Recharger
      </button>
    </div>
  </div>

  <button
    class="toggle-panel-btn"
    (click)="toggleControlPanel()"
    title="{{ isPanelVisible ? 'Masquer' : 'Afficher' }} le panneau de contrôle"
  >
    {{ isPanelVisible ? '✕' : '≡' }}
  </button>
</div>
